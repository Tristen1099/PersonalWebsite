function _defineProperty(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function _defineProperties(n,t){for(var e=0;e<t.length;e++){var l=t[e];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(n,l.key,l)}}function _createClass(n,t,e){return t&&_defineProperties(n.prototype,t),e&&_defineProperties(n,e),n}function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"l8/c":function(n,t,e){"use strict";e.r(t);var l=e("8Y7J"),a=function n(){_classCallCheck(this,n)},o=e("Sy1n"),i=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){setTimeout((function(){o.a.mainPage=!1}))}}]),n}(),u=e("pMnS"),c=e("iInd"),r=e("SVse"),s=l.mb({encapsulation:0,styles:[[""]],data:{}});function h(n){return l.Fb(0,[(n()(),l.ob(0,0,null,null,17,"div",[["class","container"]],null,null,null,null,null)),(n()(),l.ob(1,0,null,null,1,"div",[["class","pageHeader"]],null,null,null,null,null)),(n()(),l.Eb(-1,null,[" Welcome to the secret arcade "])),(n()(),l.ob(3,0,null,null,14,"div",[],null,null,null,null,null)),(n()(),l.ob(4,0,null,null,13,"ul",[],null,null,null,null,null)),(n()(),l.ob(5,0,null,null,6,"li",[],null,null,null,null,null)),(n()(),l.ob(6,0,null,null,5,"a",[["routerLink","/arcade-page-component/block-stacker"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(n,t,e){var a=!0;return"click"===t&&(a=!1!==l.zb(n,7).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&a),a}),null,null)),l.nb(7,671744,[[2,4]],0,c.n,[c.k,c.a,r.g],{routerLink:[0,"routerLink"]},null),l.nb(8,1720320,null,2,c.m,[c.k,l.k,l.B,[2,c.l],[2,c.n]],{routerLinkActive:[0,"routerLinkActive"]},null),l.Cb(603979776,1,{links:1}),l.Cb(603979776,2,{linksWithHrefs:1}),(n()(),l.Eb(-1,null,[" Block Stacker "])),(n()(),l.ob(12,0,null,null,1,"li",[],null,null,null,null,null)),(n()(),l.Eb(-1,null,[" Other Game "])),(n()(),l.ob(14,0,null,null,1,"li",[],null,null,null,null,null)),(n()(),l.Eb(-1,null,[" Other Game "])),(n()(),l.ob(16,0,null,null,1,"li",[],null,null,null,null,null)),(n()(),l.Eb(-1,null,[" Other Game "])),(n()(),l.ob(18,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),l.nb(19,212992,null,0,c.p,[c.b,l.M,l.j,[8,null],l.h],null,null)],(function(n,t){n(t,7,0,"/arcade-page-component/block-stacker"),n(t,8,0,"active"),n(t,19,0)}),(function(n,t){n(t,6,0,l.zb(t,7).target,l.zb(t,7).href)}))}var b,d=l.kb("app-arcade-page",i,(function(n){return l.Fb(0,[(n()(),l.ob(0,0,null,null,1,"app-arcade-page",[],null,null,null,h,s)),l.nb(1,4308992,null,0,i,[],null,null)],(function(n,t){n(t,1,0)}),null)}),{},{},[]),f=function(){var n=function n(){_classCallCheck(this,n)};return n.LEFT=37,n.RIGHT=39,n.DOWN=40,n.UP=38,n.SPACE=32,n}(),v=["none","rgba(0, 255, 255)","rgba(0, 0, 255)","rgba(255, 132, 0)","rgba(255, 255, 0)","rgba(0, 255, 0)","rgba(255, 0, 255)","rgba(255, 0, 0)"],g=[[],[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[2,0,0],[2,2,2],[0,0,0]],[[0,0,3],[3,3,3],[0,0,0]],[[4,4],[4,4]],[[0,5,5],[5,5,0],[0,0,0]],[[0,6,0],[6,6,6],[0,0,0]],[[7,7,0],[0,7,7],[0,0,0]]],k=function(){var n=function n(){_classCallCheck(this,n)};return n[1]=720,n[2]=630,n[3]=550,n[4]=470,n[5]=380,n[6]=300,n[7]=220,n[8]=130,n[9]=100,n[10]=80,n[11]=80,n[12]=80,n[13]=70,n[14]=70,n[15]=70,n[16]=50,n[17]=50,n[18]=50,n[19]=30,n[20]=30,n}(),p=function(){function n(t){_classCallCheck(this,n),this.canvasContext=t,this.spawn()}return _createClass(n,[{key:"spawn",value:function(){var n=this.randomizePieceType(v.length-1);this.color=v[n],this.shape=g[n],this.x=3,this.y=0}},{key:"draw",value:function(){var n=this;this.shape.forEach((function(t,e){t.forEach((function(t,l){t>0&&(n.canvasContext.fillStyle=n.color,n.canvasContext.fillRect(n.x+l,n.y+e,1,1))}))}))}},{key:"drawNext",value:function(n){var t=this;n.clearRect(0,0,n.canvas.width,n.canvas.height),this.shape.forEach((function(e,l){e.forEach((function(e,a){e>0&&t.addNextShadow(n,a,l)}))})),n.fillStyle=this.color,this.shape.forEach((function(e,l){e.forEach((function(e,a){e>0&&(n.fillStyle=t.color,n.fillRect(a+.025,l+.025,.975,.975))}))}))}},{key:"move",value:function(n){this.x=n.x,this.y=n.y,this.shape=n.shape}},{key:"addNextShadow",value:function(n,t,e){n.fillStyle="black",n.fillRect(t,e,1.025,1.025)}},{key:"randomizePieceType",value:function(n){return Math.floor(Math.random()*n+1)}}]),n}(),C=function(){function n(t){var e,l=this;_classCallCheck(this,n),this.service=t,this.moves=(_defineProperty(e={},f.LEFT,(function(n){return Object.assign({},n,{x:n.x-1})})),_defineProperty(e,f.RIGHT,(function(n){return Object.assign({},n,{x:n.x+1})})),_defineProperty(e,f.DOWN,(function(n){return Object.assign({},n,{y:n.y+1})})),_defineProperty(e,f.SPACE,(function(n){return Object.assign({},n,{y:n.y+1})})),_defineProperty(e,f.UP,(function(n){return l.service.rotate(n)})),e)}return _createClass(n,[{key:"keyEvent",value:function(n){if(this.moves[n.keyCode]){n.preventDefault();var t=this.moves[n.keyCode](this.currentPiece);if(n.keyCode===f.SPACE)for(;this.service.valid(t,this.gameBoard);)this.currentPiece.move(t),t=this.moves[f.DOWN](this.currentPiece);else this.service.valid(t,this.gameBoard)&&this.currentPiece.move(t)}}},{key:"ngOnInit",value:function(){this.initializeBoard(),this.initializeNext(),this.resetGame(),this.highScore=0}},{key:"ngAfterViewInit",value:function(){setTimeout((function(){o.a.mainPage=!1}))}},{key:"initializeBoard",value:function(){this.canvasContext=this.canvas.nativeElement.getContext("2d"),this.canvasContext.canvas.width=300,this.canvasContext.canvas.height=600,this.canvasContext.scale(30,30)}},{key:"initializeNext",value:function(){this.canvasContextNext=this.canvasNext.nativeElement.getContext("2d"),this.canvasContextNext.canvas.width=122,this.canvasContextNext.canvas.height=120,this.canvasContextNext.scale(30,30)}},{key:"play",value:function(){this.gameStarted=!0,this.resetGame(),this.nextPiece=new p(this.canvasContext),this.currentPiece=new p(this.canvasContext),this.nextPiece.drawNext(this.canvasContextNext),this.time.start=performance.now(),this.requestId&&cancelAnimationFrame(this.requestId),this.runGame()}},{key:"gameOver",value:function(){}},{key:"pause",value:function(){this.gameStarted&&(this.paused?(this.runGame(),document.getElementById("pause-button").innerHTML="Pause"):(cancelAnimationFrame(this.requestId),document.getElementById("pause-button").innerHTML="Play"),this.paused=!this.paused)}},{key:"runGame",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.time.elapsed=n-this.time.start,this.time.elapsed>this.time.level&&(this.time.start=n,this.dropPiece()),this.draw(),this.requestId=requestAnimationFrame(this.runGame.bind(this))}},{key:"dropPiece",value:function(){var n=this.moves[f.DOWN](this.currentPiece);this.service.valid(n,this.gameBoard)?this.currentPiece.move(n):(this.freezePiece(),this.currentPiece=this.nextPiece,this.nextPiece=new p(this.canvasContext),this.nextPiece.drawNext(this.canvasContextNext))}},{key:"freezePiece",value:function(){var n=this;this.currentPiece.shape.forEach((function(t,e){t.forEach((function(t,l){t>0&&(n.gameBoard[e+n.currentPiece.y][l+n.currentPiece.x]=t)}))}))}},{key:"draw",value:function(){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.currentPiece.draw(),this.drawBoard()}},{key:"drawBoard",value:function(){var n=this;this.gameBoard.forEach((function(t,e){t.forEach((function(t,l){t>0&&(n.canvasContext.fillStyle=v[t],n.canvasContext.fillRect(l,e,1,1))}))})),this.drawGridOnCanvas()}},{key:"resetGame",value:function(){this.paused=!1,this.score=0,this.lines=0,this.level=1,this.gameBoard=this.getEmptyGameBoard(),this.time={start:0,elapsed:0,level:k[this.level]},this.drawGridOnCanvas()}},{key:"drawGridOnCanvas",value:function(){for(var n=1;n<10;n++)this.canvasContext.fillStyle="black",this.canvasContext.fillRect(n,0,.025,this.canvasContext.canvas.height);for(var t=1;t<20;t++)this.canvasContext.fillStyle="black",this.canvasContext.fillRect(0,t,this.canvasContext.canvas.width,.025)}},{key:"getEmptyGameBoard",value:function(){return Array.from({length:20},(function(){return Array(10).fill(0)}))}}]),n}(),m=((b=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"valid",value:function(n,t){var e=this;return n.shape.every((function(l,a){return l.every((function(l,o){var i=n.x+o,u=n.y+a;return e.isEmpty(l)||e.insideWalls(i)&&e.aboveFloor(u)&&e.notOccupied(t,i,u)}))}))}},{key:"isEmpty",value:function(n){return 0===n}},{key:"insideWalls",value:function(n){return n>=0&&n<10}},{key:"aboveFloor",value:function(n){return n<=20}},{key:"notOccupied",value:function(n,t,e){return n[e]&&0===n[e][t]}},{key:"rotate",value:function(n){for(var t=JSON.parse(JSON.stringify(n)),e=0;e<t.shape.length;++e)for(var l=0;l<e;++l){var a=[t.shape[e][l],t.shape[l][e]];t.shape[l][e]=a[0],t.shape[e][l]=a[1]}return t.shape.forEach((function(n){return n.reverse()})),t}}]),n}()).ngInjectableDef=l.Jb({factory:function(){return new b},token:b,providedIn:"root"}),b),P=l.mb({encapsulation:0,styles:[[".block-stacker-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding:1em 0}.block-stacker-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-family:monospace;font-weight:600;font-size:3.5em;color:#fff}.block-stacker-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{height:100vh;padding:0 25%;display:flow-root;margin-bottom:2em}.block-stacker-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .game-board[_ngcontent-%COMP%]{border:2px solid;float:left;background-color:rgba(7,129,7,.15)}.block-stacker-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .game-controls[_ngcontent-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:justify;justify-content:space-between;width:300px;color:#fff;float:right}.block-stacker-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .game-controls[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:justify;justify-content:space-between;bottom:0}.block-stacker-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .game-controls[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-size:16px;padding:15px 30px;width:140px;border:1px solid #000}.block-stacker-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .game-controls[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   #play-button[_ngcontent-%COMP%]{background-color:#4caf50}.block-stacker-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .game-controls[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   #reset-button[_ngcontent-%COMP%]{background-color:red}.block-stacker-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .game-controls[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   #pause-button[_ngcontent-%COMP%]{background-color:#4caf50}.block-stacker-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .game-controls[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   #pause-button.button-disabled[_ngcontent-%COMP%]{background-color:#ccc}@media all and (max-width:1500px){.block-stacker-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:3em}.block-stacker-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{padding:0 20%}}@media all and (max-width:1400px){.block-stacker-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5em}.block-stacker-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{padding:0 15%}}@media all and (max-width:1300px){.block-stacker-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2em}.block-stacker-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{padding:0 10%}}"]],data:{}});function y(n){return l.Fb(0,[(n()(),l.ob(0,0,null,null,1,"button",[["class","button"],["id","play-button"]],null,[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.play()&&l),l}),null,null)),(n()(),l.Eb(-1,null,[" Play "]))],null,null)}function x(n){return l.Fb(0,[(n()(),l.ob(0,0,null,null,1,"button",[["class","button"],["id","reset-button"]],null,[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.gameOver()&&l),l}),null,null)),(n()(),l.Eb(-1,null,[" Reset "]))],null,null)}function O(n){return l.Fb(0,[l.Cb(402653184,1,{canvas:0}),l.Cb(402653184,2,{canvasNext:0}),(n()(),l.ob(2,0,null,null,25,"div",[["class","block-stacker-container"]],null,null,null,null,null)),(n()(),l.ob(3,0,null,null,2,"div",[["class","header"]],null,null,null,null,null)),(n()(),l.ob(4,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),l.Eb(-1,null,["Block Stacker"])),(n()(),l.ob(6,0,null,null,21,"div",[["class","grid"]],null,null,null,null,null)),(n()(),l.ob(7,0,[[1,0],["board",1]],null,0,"canvas",[["class","game-board"]],null,null,null,null,null)),(n()(),l.ob(8,0,null,null,19,"div",[["class","game-controls"]],null,null,null,null,null)),(n()(),l.ob(9,0,null,null,11,"div",[],null,null,null,null,null)),(n()(),l.ob(10,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),l.Eb(11,null,["Level: ",""])),(n()(),l.ob(12,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),l.Eb(13,null,["Score: ",""])),(n()(),l.ob(14,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),l.Eb(15,null,["Lines: ",""])),(n()(),l.ob(16,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),l.Eb(17,null,["High Score: ",""])),(n()(),l.ob(18,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),l.Eb(-1,null,["Next Block:"])),(n()(),l.ob(20,0,[[2,0],["next",1]],null,0,"canvas",[["class","next"]],null,null,null,null,null)),(n()(),l.ob(21,0,null,null,6,"div",[["class","button-container"]],null,null,null,null,null)),(n()(),l.db(16777216,null,null,1,null,y)),l.nb(23,16384,null,0,r.i,[l.M,l.J],{ngIf:[0,"ngIf"]},null),(n()(),l.db(16777216,null,null,1,null,x)),l.nb(25,16384,null,0,r.i,[l.M,l.J],{ngIf:[0,"ngIf"]},null),(n()(),l.ob(26,0,null,null,1,"button",[["class","button"],["id","pause-button"]],[[2,"button-disabled",null]],[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.pause()&&l),l}),null,null)),(n()(),l.Eb(-1,null,[" Pause "]))],(function(n,t){var e=t.component;n(t,23,0,!e.gameStarted),n(t,25,0,e.gameStarted)}),(function(n,t){var e=t.component;n(t,11,0,e.level),n(t,13,0,e.score),n(t,15,0,e.lines),n(t,17,0,e.highScore),n(t,26,0,!e.gameStarted)}))}var _=l.kb("app-block-stacker",C,(function(n){return l.Fb(0,[(n()(),l.ob(0,0,null,null,1,"app-block-stacker",[],null,[["window","keydown"]],(function(n,t,e){var a=!0;return"window:keydown"===t&&(a=!1!==l.zb(n,1).keyEvent(e)&&a),a}),O,P)),l.nb(1,4308992,null,0,C,[m],null,null)],(function(n,t){n(t,1,0)}),null)}),{},{},[]),M=function n(){_classCallCheck(this,n)};e.d(t,"ArcadeModuleNgFactory",(function(){return w}));var w=l.lb(a,[i],(function(n){return l.wb([l.xb(512,l.j,l.W,[[8,[u.a,d,_]],[3,l.j],l.v]),l.xb(4608,r.k,r.j,[l.s,[2,r.t]]),l.xb(1073742336,r.b,r.b,[]),l.xb(1073742336,c.o,c.o,[[2,c.t],[2,c.k]]),l.xb(1073742336,M,M,[]),l.xb(1073742336,a,a,[]),l.xb(1024,c.i,(function(){return[[{path:"",component:i},{path:"block-stacker",component:C},{path:"**",component:i}]]}),[])])}))}}]);